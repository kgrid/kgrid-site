(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{397:function(t,s,e){"use strict";e.r(s);var a=e(44),n=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"ko-service-openapi"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ko-service-openapi"}},[t._v("#")]),t._v(" KO Service OpenAPI")]),t._v(" "),e("p",[t._v("KO Service interfaces are described using the "),e("a",{attrs:{href:"https://spec.openapis.org/oas/v3.1.0",target:"_blank",rel:"noopener noreferrer"}},[t._v("OpenAPI"),e("OutboundLink")],1),t._v(" specification.  This specification defines the path(s) to the service, the request and response scheme and much more.  Here we will briefly describe the minimal information needed to describe a KO Service.  You can write OpenAPI definitions in YAML or JSON, our templates in KGrid CLI and our examples all use the YAML format, we found the format easier and more concise.")]),t._v(" "),e("h2",{attrs:{id:"structure"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#structure"}},[t._v("#")]),t._v(" Structure")]),t._v(" "),e("p",[t._v("The following describes the basic structure of OpenAPI 3.0 definition. We will use the "),e("a",{attrs:{href:"https://kgrid-activator-demo.herokuapp.com/kos/js/simple/v1.0/service.yaml",target:"_blank",rel:"noopener noreferrer"}},[t._v("JS Simple V1.0"),e("OutboundLink")],1),t._v(" OpenAPI 3.0 definition for this example.")]),t._v(" "),e("h3",{attrs:{id:"metadata"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#metadata"}},[t._v("#")]),t._v(" Metadata")]),t._v(" "),e("p",[t._v("Define the version of the OpenAPI Specification and basic information about this API")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("openapi")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 3.0.2\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("info")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("version")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1.0'")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("title")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Hello, world'")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("description")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" An example of simple Knowledge Object\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("license")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" GNU General Public License v3 (GPL"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("3)\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("url")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("\n      https"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//tldrlegal.com/license/gnu"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("general"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("public"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("license"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("v3"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("(gpl"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("3)"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#fulltext")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("contact")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" KGrid Team\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("email")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" kgrid"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("developers@umich.edu\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("url")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://kgrid.org'")]),t._v("\n")])])]),e("h3",{attrs:{id:"servers"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#servers"}},[t._v("#")]),t._v(" Servers")]),t._v(" "),e("p",[t._v("The servers section specifies the API server and base URL. for KO Services we use the "),e("a",{attrs:{href:"https://en.wikipedia.org/wiki/Archival_Resource_Key",target:"_blank",rel:"noopener noreferrer"}},[t._v("Archival Resource Key"),e("OutboundLink")],1),t._v(" (ark id) which is /naan/name.  Using the ark id ensures the paths are unique.")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("servers")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("url")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /js/simple\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("description")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Hello world\n")])])]),e("h3",{attrs:{id:"paths"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#paths"}},[t._v("#")]),t._v(" Paths")]),t._v(" "),e("p",[t._v("The paths section defines individual endpoints (paths) in your API.  Currently KO Service activation support the "),e("em",[t._v("POST")]),t._v(" HTTP method and GET using the resource adapter.")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("paths")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("/welcome")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("post")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("tags")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" KO Endpoints\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("description")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Welcome.\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("operationId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" welcome\n")])])]),e("h3",{attrs:{id:"request-body"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#request-body"}},[t._v("#")]),t._v(" Request Body")]),t._v(" "),e("p",[t._v("The requestBody keyword describes the body content and media type. KO services use json inputs.  The json format is defined in the "),e("em",[t._v("input")]),t._v(" scheme components section of the  definition.")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("requestBody")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("description")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" inputs\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("required")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("content")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("application/json")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("schema")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n              "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("$ref")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#/components/schemas/input'")]),t._v("\n")])])]),e("p",[t._v("Here is the "),e("em",[t._v("input")]),t._v(" json definition with type and examples.")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("components")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("schemas")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("input")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("required")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" name\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("properties")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" string\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("x-kgrid-label")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Please enter your name'")]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("x-kgrid-unit")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("example")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Bob\n")])])]),e("h3",{attrs:{id:"responses"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#responses"}},[t._v("#")]),t._v(" Responses")]),t._v(" "),e("p",[t._v("To response definition is categorized by status code.  The content defines the type and format via a scheme "),e("em",[t._v("output")]),t._v(".")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("responses")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("'200'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("description")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" response\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("content")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("application/json")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n              "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("schema")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("$ref")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://demo.kgrid.org/schemas/openapischemas.yaml#/components/schemas/genericresponse'")]),t._v("\n")])])]),e("h2",{attrs:{id:"resources"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#resources"}},[t._v("#")]),t._v(" Resources")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://oai.github.io/Documentation/specification-structure.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("OpenAPI Basic Structure"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://openapi.tools/",target:"_blank",rel:"noopener noreferrer"}},[t._v("OpenAPI Tools"),e("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=n.exports}}]);